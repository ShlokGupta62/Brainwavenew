// Language translations
const translations = {
    en: {
        // Header
        driver_name: "DRIVER: AJAY KUMAR",
        status_active: "STATUS: ACTIVE",
        current_date: "FEBRUARY 2026",
        
        // Titles
        allocations_title: "NEW DELIVERY ALLOCATIONS",
        allocations_subtitle: "YOUR ASSIGNED TRANSPORT ROUTES FOR FEBRUARY 2026",
        
        // Stats
        total_allocations: "TOTAL ALLOCATIONS",
        total_km: "TOTAL KM",
        february_days: "FEBRUARY DAYS",
        avg_hours: "AVG HOURS",
        
        // Sections
        your_allocations: "YOUR ALLOCATIONS",
        refresh: "REFRESH",
        route_map: "ROUTE MAP",
        select_route: "SELECT A ROUTE TO VIEW MAP",
        route_info: "ROUTE INFORMATION",
        
        // Route Details
        distance: "DISTANCE:",
        duration: "DURATION:",
        vehicle: "VEHICLE:",
        
        // Allocation Card
        allocation: "ALLOCATION",
        status: "STATUS",
        pending: "PENDING",
        in_progress: "IN PROGRESS",
        completed: "COMPLETED",
        start_location: "START LOCATION",
        end_location: "END LOCATION",
        delivery_date: "DELIVERY DATE",
        delivery_time: "DELIVERY TIME",
        vehicle_type: "VEHICLE TYPE",
        
        // Footer
        support: "SUPPORT",
        support_text: "24/7 DRIVER SUPPORT: 1800-123-4567",
        emergency: "EMERGENCY",
        emergency_text: "EMERGENCY CONTACT: 1800-987-6543",
        last_updated: "LAST UPDATED",
        copyright: "© 2026 LOGISTICS PRO. ALL RIGHTS RESERVED."
    },
    
    hi: {
        // Header
        driver_name: "चालक: अजय कुमार",
        status_active: "स्थिति: सक्रिय",
        current_date: "फरवरी 2026",
        
        // Titles
        allocations_title: "नए वितरण आवंटन",
        allocations_subtitle: "फरवरी 2026 के लिए आपके निर्दिष्ट परिवहन मार्ग",
        
        // Stats
        total_allocations: "कुल आवंटन",
        total_km: "कुल किलोमीटर",
        february_days: "फरवरी के दिन",
        avg_hours: "औसत घंटे",
        
        // Sections
        your_allocations: "आपके आवंटन",
        refresh: "ताज़ा करें",
        route_map: "मार्ग मानचित्र",
        select_route: "मानचित्र देखने के लिए मार्ग चुनें",
        route_info: "मार्ग की जानकारी",
        
        // Route Details
        distance: "दूरी:",
        duration: "अवधि:",
        vehicle: "वाहन:",
        
        // Allocation Card
        allocation: "आवंटन",
        status: "स्थिति",
        pending: "लंबित",
        in_progress: "चालू",
        completed: "पूरा हुआ",
        start_location: "प्रारंभ स्थान",
        end_location: "अंतिम स्थान",
        delivery_date: "वितरण तिथि",
        delivery_time: "वितरण समय",
        vehicle_type: "वाहन प्रकार",
        
        // Footer
        support: "समर्थन",
        support_text: "24/7 चालक समर्थन: 1800-123-4567",
        emergency: "आपातकाल",
        emergency_text: "आपातकालीन संपर्क: 1800-987-6543",
        last_updated: "अंतिम अपडेट",
        copyright: "© 2026 लॉजिस्टिक्स प्रो. सर्वाधिकार सुरक्षित."
    },
    
    bn: {
        // Header
        driver_name: "ড্রাইভার: অজয় কুমার",
        status_active: "স্থিতি: সক্রিয়",
        current_date: "ফেব্রুয়ারি ২০২৬",
        
        // Titles
        allocations_title: "নতুন বিতরণ বরাদ্দ",
        allocations_subtitle: "ফেব্রুয়ারি ২০২৬ এর জন্য আপনার নির্ধারিত পরিবহন রুট",
        
        // Stats
        total_allocations: "মোট বরাদ্দ",
        total_km: "মোট কিমি",
        february_days: "ফেব্রুয়ারি দিন",
        avg_hours: "গড় ঘন্টা",
        
        // Sections
        your_allocations: "আপনার বরাদ্দ",
        refresh: "রিফ্রেশ করুন",
        route_map: "রুট ম্যাপ",
        select_route: "ম্যাপ দেখতে একটি রুট নির্বাচন করুন",
        route_info: "রুট তথ্য",
        
        // Route Details
        distance: "দূরত্ব:",
        duration: "সময়কাল:",
        vehicle: "যানবাহন:",
        
        // Allocation Card
        allocation: "বরাদ্দ",
        status: "স্থিতি",
        pending: "বিচারাধীন",
        in_progress: "চলমান",
        completed: "সম্পন্ন",
        start_location: "শুরু অবস্থান",
        end_location: "শেষ অবস্থান",
        delivery_date: "বিতরণ তারিখ",
        delivery_time: "বিতরণ সময়",
        vehicle_type: "যানবাহনের ধরন",
        
        // Footer
        support: "সহায়তা",
        support_text: "24/7 ড্রাইভার সমর্থন: 1800-123-4567",
        emergency: "জরুরী",
        emergency_text: "জরুরী যোগাযোগ: 1800-987-6543",
        last_updated: "সর্বশেষ আপডেট",
        copyright: "© ২০২৬ লজিস্টিকস প্রো. সর্বস্বত্ব সংরক্ষিত."
    },
    
    mr: {
        // Header
        driver_name: "चालक: अजय कुमार",
        status_active: "स्थिती: सक्रिय",
        current_date: "फेब्रुवारी २०२६",
        
        // Titles
        allocations_title: "नवीन वितरण आवंटन",
        allocations_subtitle: "फेब्रुवारी २०२६ साठी तुमचे नियुक्त केलेले वाहतूक मार्ग",
        
        // Stats
        total_allocations: "एकूण आवंटन",
        total_km: "एकूण किमी",
        february_days: "फेब्रुवारी दिवस",
        avg_hours: "सरासरी तास",
        
        // Sections
        your_allocations: "तुमची आवंटन",
        refresh: "रिफ्रेश करा",
        route_map: "मार्ग नकाशा",
        select_route: "नकाशा पाहण्यासाठी मार्ग निवडा",
        route_info: "मार्ग माहिती",
        
        // Route Details
        distance: "अंतर:",
        duration: "कालावधी:",
        vehicle: "वाहन:",
        
        // Allocation Card
        allocation: "आवंटन",
        status: "स्थिती",
        pending: "प्रलंबित",
        in_progress: "प्रगतीपथावर",
        completed: "पूर्ण",
        start_location: "प्रारंभ स्थान",
        end_location: "अंतिम स्थान",
        delivery_date: "वितरण तारीख",
        delivery_time: "वितरण वेळ",
        vehicle_type: "वाहन प्रकार",
        
        // Footer
        support: "आधार",
        support_text: "24/7 चालक आधार: 1800-123-4567",
        emergency: "आणीबाणी",
        emergency_text: "आणीबाणी संपर्क: 1800-987-6543",
        last_updated: "शेवटचे अद्ययावत",
        copyright: "© २०२६ लॉजिस्टिक्स प्रो. सर्व हक्क राखीव."
    }
};

// Language management
let currentLanguage = 'en';

function changeLanguage(lang) {
    currentLanguage = lang;
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });
    
    // Update select dropdown
    document.getElementById('languageSelect').value = lang;
    
    // Update allocation cards
    updateAllocationCardsLanguage();
    
    // Save preference
    localStorage.setItem('preferredLanguage', lang);
}

function updateAllocationCardsLanguage() {
    document.querySelectorAll('.allocation-card').forEach(card => {
        const allocationId = card.dataset.id;
        const allocation = allocationsData.find(a => a.id === allocationId);
        
        if (allocation) {
            const statusElement = card.querySelector('.allocation-status');
            statusElement.textContent = translations[currentLanguage][allocation.status_key];
            
            const vehicleTypeElement = card.querySelector('.vehicle-details p');
            vehicleTypeElement.textContent = allocation.vehicle.type[currentLanguage];
        }
    });
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
    changeLanguage(savedLanguage);
    
    // Add event listener to language dropdown
    document.getElementById('languageSelect').addEventListener('change', (e) => {
        changeLanguage(e.target.value);
    });
});